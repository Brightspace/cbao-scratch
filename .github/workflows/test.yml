name: test

on: push

jobs:
  test:
    runs-on: [self-hosted, Linux, AWS]
    steps:
      - id: first
        env:
          VAR: ${{ fromJson('{"a":"aaa"}').b }}
        run: |
          echo "$VAR"
          echo "::set-output name=var::$VAR"

      - if: steps.first.outputs.var
        env:
          LOOK: ${{ steps.first.outputs.var }}
        run: |
          echo "failure: $LOOK"
